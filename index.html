<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=1.0">
    <title>Document</title>
</head>
<body>
<h1 class="text_1">BARTINCIKI</h1>

<div class="contain">
    <div class="turn">
        <h1>Очередь</h1>
        <ul class="list" id="list"></ul>
    </div>

    <div class="vertical-line"></div>

    <div class="in_li">
        <h1 class="br">Бронировать</h1>
        <input type="text" class="inp_list" placeholder="Введите Имя" id="title">
        <button class="btnn" id="create" onclick="addToQueue()">Добавить</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/app.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    // Подключение к WebSocket серверу
    const socket = io();

    // Обработка события подключения к серверу
    socket.on('connect', () => {
        console.log('Подключено к серверу');
    });

    // Функция добавления пользователя в очередь
    function addToQueue() {
        const name = document.getElementById('title').value;
        if (name.trim() !== '') {
            socket.emit('addToQueue', name);  // Отправляем имя на сервер
            document.getElementById('title').value = ''; // Очищаем поле ввода
        }
    }

    // Получение обновленного списка очереди от сервера
    socket.on('updateQueue', (queue) => {
        const listElement = document.getElementById('list');
        listElement.innerHTML = ''; // Очищаем текущий список

        // Обновляем список новыми данными
        queue.forEach(name => {
            const listItem = document.createElement('li');
            listItem.textContent = name;
            listElement.appendChild(listItem);
        });
    });
</script>
</body>
</html>
